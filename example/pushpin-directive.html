<!DOCTYPE HTML>
<html>
    <head>
        <script charset="UTF-8" type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.12/angular.min.js"></script>
        <script src="../dist/angular-bing-maps.js"></script>

        <script type="text/javascript">
            var app = angular.module('angularBingMapExample', ['angularBingMaps']);
            app.controller('ExampleController', ['$scope', '$http', function($scope, $http) {

                /*<bing-map> directive options*/
                $scope.mapOptions = {};
                $scope.mapOptions.mapType = 'a';

                $scope.pushpins = [];

                var locations = [];
                /*<pushpin> directive options*/
                for (var i = 0; i < 10; i++) {
                    pushpin = {};
                    pushpin.location = {latitude: 30.614919+Math.random(),longitude: -96.342316+Math.random()};
                    pushpin.options = {
                        draggable: true
                    }
                    pushpin.data= {
                        text: 'Hello World! ' + i
                    };
                    pushpin.events = {
                        click: function(eventData) {
                            var data = eventData.target.pushpinData;
                            alert('The click event is working fine! Here is the data: ' + data.text)
                        }
                    };
                    $scope.pushpins.push(pushpin);
                    locations.push(pushpin.location)
                }

                var bounds = Microsoft.Maps.LocationRect.fromLocations(locations);
                $scope.mapOptions.bounds = bounds;
            }]);
        </script>

        <style type="text/css">
            bing-map {
                height: 100%;
                width: 100%;
            }
        </style>

    </head>
    <body ng-app="angularBingMapExample" ng-strict-di>

        <div class="bing-map-container" ng-controller="ExampleController">
            <bing-map
                credentials="'AkaxzD5YOJCbIvziHVOLfm6AkeM5Z5UQ3dHS53mQzwK-6LGWnxYjAwNqfe3D4UBT'"
                bounds="mapOptions.bounds"
                mapType="mapOptions.mapType">

                <pushpin ng-repeat="pushpin in pushpins"
                    lat="pushpin.location.latitude"
                    lng="pushpin.location.longitude"
                    options="pushpin.options"
                    events="pushpin.events",
                    pushpin-data="pushpin.data">
                </pushpin>

            </bing-map>

        </div>

    </body>
</html>
